@{
    ViewData["Title"] = "Home Page";
}
<script src="~/js/Views/Home/index.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
<div class="bg-light p-2 border-bottom" style="position: relative; height: 55px;">
    <div style="position: absolute; left: 0; padding-left: 1em;">
        <button class="btn btn-outline-secondary" onclick="loadPrevious()">&lt; Back</button>
    </div>
    <div class="d-flex align-items-center gap-2" style=" position: absolute; left: 50%; transform: translateX(-50%);">
        <input id="classInput" class="form-control w-auto" placeholder="Core.InSite.SiteContext" />
        <select id="projectInput" class="form-select w-auto">
            @foreach (var project in (List<string>)ViewData["ProjectList"])
            {
                <option value="@project">@project</option>
            }
        </select>
        <button class="btn btn-outline-primary" onclick="reloadPage()">Get Selected Class</button>
    </div>
    <div class="d-flex align-items-center gap-2" style="position: absolute; right: 0; padding-right: 1em;">
        <button class="btn btn-outline-secondary" onclick="loadEntireProject()">Load Entire Project</button>
        <button class="btn btn-outline-secondary" onclick="loadAllControllers()">Load All Controllers</button>
    </div>
</div>

<div class="container-fluid overflow-hidden">
    <div class="d-flex flex-row" style="height: calc(100vh - 70px);">
        <div id="graphPanel" class="flex-grow-1 overflow-auto p-3 bg-white">
            <div id="loadingSpinner" style="display: none;">
                <div class="spinner"></div>
            </div>
            <div id="svgContainer" style="height: 100%; overflow: auto;">
                <div id="svgOutput" style="height: 100%">Enter a fully qualified class name and select a project</div>
            </div>
        </div>

        <div id="treePanel" class="bg-black text-light p-3"
             style="white-space: pre; overflow: auto; max-height: 100%; max-width: 40vw;">
            <pre id="treeOutput" class="flex-fill mono p-2 bg-black text-light">Enter a fully qualified class name and select a project</pre>
        </div>
    </div>
</div>

<style>
    .mono {
        font-family: monospace;
        white-space: pre-wrap;
    }
    #loadingSpinner {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(255,255,255,0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 6px solid #ccc;
      border-top-color: #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @@keyframes spin {
      to { transform: rotate(360deg); }
    }
</style>